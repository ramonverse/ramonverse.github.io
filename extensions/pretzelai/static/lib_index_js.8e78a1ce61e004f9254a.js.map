{"version":3,"file":"lib_index_js.8e78a1ce61e004f9254a.js","mappings":"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","sources":["webpack://pretzelai/./src/index.ts"],"sourcesContent":["import {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport { ICommandPalette } from '@jupyterlab/apputils';\nimport { INotebookTracker } from '@jupyterlab/notebook';\nimport * as monaco from 'monaco-editor';\n\nconst PLUGIN_ID = 'cell-code-replacer:plugin';\n\nconst extension: JupyterFrontEndPlugin<void> = {\n  id: PLUGIN_ID,\n  autoStart: true,\n  requires: [ICommandPalette, INotebookTracker],\n  activate: (\n    app: JupyterFrontEnd,\n    palette: ICommandPalette,\n    notebookTracker: INotebookTracker\n  ) => {\n    const { commands } = app;\n    const command = 'cell-code-replacer:replace-code';\n\n    commands.addCommand(command, {\n      label: 'Replace Cell Code',\n      execute: () => {\n        const activeCell = notebookTracker.activeCell;\n        if (activeCell) {\n          const oldCode = activeCell.model.sharedModel.source;\n\n          // Create an input field and append it below the cell\n          const inputContainer = document.createElement('div');\n          inputContainer.style.marginTop = '10px';\n          inputContainer.style.marginLeft = '70px';\n          activeCell.node.appendChild(inputContainer);\n\n          const inputField = document.createElement('input');\n          inputField.type = 'text';\n          inputField.placeholder = 'Enter your text';\n          inputField.style.width = '50%';\n          inputContainer.appendChild(inputField);\n\n          const submitButton = document.createElement('button');\n          submitButton.textContent = 'Submit';\n          inputContainer.appendChild(submitButton);\n\n          inputField.focus();\n\n          const handleAccept = () => {\n            const userInput = inputField.value;\n            if (userInput !== '') {\n              const diffContainer = document.createElement('div');\n              diffContainer.style.marginTop = '10px';\n              diffContainer.style.height = '200px';\n              activeCell.node.appendChild(diffContainer);\n\n              // Remove input field and submit button\n              inputContainer.removeChild(inputField);\n              inputContainer.removeChild(submitButton);\n\n              // Show \"Thinking ...\" message\n              const thinkingMessage = document.createElement('div');\n              thinkingMessage.textContent = 'Thinking ...';\n              inputContainer.appendChild(thinkingMessage);\n\n              fetch(\n                'https://q8qeei2tn4.execute-api.us-west-1.amazonaws.com/default/pretzel_notebook',\n                {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json'\n                  },\n                  body: JSON.stringify({\n                    oldCode,\n                    userInput\n                  })\n                }\n              )\n                .then(response => response.json())\n                .then(data => {\n                  const gen = data.message;\n                  const diffEditor = monaco.editor.createDiffEditor(\n                    diffContainer,\n                    {\n                      readOnly: true,\n                      theme: 'vs-dark'\n                    }\n                  );\n                  diffEditor.setModel({\n                    original: monaco.editor.createModel(oldCode, 'python'),\n                    modified: monaco.editor.createModel(gen, 'python')\n                  });\n\n                  // Remove \"Thinking ...\" message\n                  inputContainer.removeChild(thinkingMessage);\n\n                  // Create \"Accept\" and \"Reject\" buttons\n                  const acceptButton = document.createElement('button');\n                  acceptButton.textContent = 'Accept';\n                  acceptButton.addEventListener('click', () => {\n                    activeCell.model.sharedModel.source = gen;\n                    commands.execute('notebook:run-cell');\n                    activeCell.node.removeChild(diffContainer);\n                    activeCell.node.removeChild(inputContainer);\n                  });\n                  inputContainer.appendChild(acceptButton);\n\n                  const rejectButton = document.createElement('button');\n                  rejectButton.textContent = 'Reject';\n                  rejectButton.addEventListener('click', () => {\n                    activeCell.node.removeChild(diffContainer);\n                    activeCell.node.removeChild(inputContainer);\n                  });\n                  inputContainer.appendChild(rejectButton);\n\n                  // Handle Enter key press to trigger accept on accept/reject buttons\n                  inputContainer.addEventListener('keydown', event => {\n                    if (event.key === 'Enter') {\n                      event.preventDefault();\n                      const activeElement = document.activeElement;\n                      if (activeElement === acceptButton) {\n                        acceptButton.click();\n                      } else if (activeElement === rejectButton) {\n                        rejectButton.click();\n                      }\n                    }\n                  });\n\n                  // Handle Escape key press to trigger reject on accept/reject buttons\n                  inputContainer.addEventListener('keydown', event => {\n                    if (event.key === 'Escape') {\n                      event.preventDefault();\n                      rejectButton.click();\n                    }\n                  });\n                })\n                .catch(error => {\n                  activeCell.model.sharedModel.source = `# Error: ${error}\\n${oldCode}`;\n                  activeCell.node.removeChild(diffContainer);\n                  activeCell.node.removeChild(inputContainer);\n                });\n            }\n          };\n\n          // Handle Enter key press to trigger submit\n          inputField.addEventListener('keydown', event => {\n            if (event.key === 'Enter') {\n              event.preventDefault();\n              handleAccept();\n            }\n          });\n\n          // Handle submit button click to trigger accept\n          submitButton.addEventListener('click', handleAccept);\n        }\n      }\n    });\n\n    const category = 'Cell Operations';\n    palette.addItem({ command, category });\n\n    app.commands.addKeyBinding({\n      command,\n      keys: ['Accel K'],\n      selector: '.jp-Notebook'\n    });\n  }\n};\n\nexport default extension;\n"],"names":[],"sourceRoot":""}